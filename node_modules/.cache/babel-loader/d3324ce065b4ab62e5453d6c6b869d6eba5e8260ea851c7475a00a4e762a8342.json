{"ast":null,"code":"var _jsxFileName = \"/Users/yuxuan/Desktop/projects/around-web/src/components/Home.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Tabs, message, Row, Col, Button } from \"antd\";\nimport axios from \"axios\";\nimport SearchBar from \"./SearchBar\";\nimport { SEARCH_KEY, BASE_URL, TOKEN_KEY } from \"../constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  TabPane\n} = Tabs;\nfunction Home(props) {\n  _s();\n  const [posts, setPost] = useState([]);\n  const [activeTab, setActiveTab] = useState(\"image\");\n  const [searchOption, setSearchOption] = useState({\n    type: SEARCH_KEY.all,\n    keyword: \"\"\n  });\n  useEffect(() => {\n    fetchPost(searchOption);\n  }, [searchOption]);\n  const fetchPost = option => {\n    const {\n      type,\n      keyword\n    } = option;\n    let url = \"\";\n    if (type === SEARCH_KEY.all) {\n      url = `${BASE_URL}/search`;\n    } else if (type === SEARCH_KEY.user) {\n      url = `${BASE_URL}/search?user=${keyword}`;\n    } else {\n      url = `${BASE_URL}/search?keywords=${keyword}`;\n    }\n    const opt = {\n      method: \"GET\",\n      url: url,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(TOKEN_KEY)}`\n      }\n    };\n    axios(opt).then(res => {\n      if (res.status === 200) {\n        setPost(res.data);\n      }\n    }).catch(err => {\n      message.error(\"Load failed. Please Try later!\");\n      console.log(\"fetch posts failed: \", err.message);\n    });\n  };\n  const renderPosts = type => {\n    if (!posts || posts.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"No!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }, this);\n    }\n    if (type === \"image\") {\n      console.log(\"images -> \", posts);\n      return \"images\";\n    } else if (type === \"video\") {\n      console.log(\"video -> \", posts);\n      return \"videos\";\n    }\n  };\n  const operations = /*#__PURE__*/_jsxDEV(Button, {\n    children: \"Upload\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home\",\n    children: [/*#__PURE__*/_jsxDEV(SearchBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 6\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"display\",\n      children: /*#__PURE__*/_jsxDEV(Tabs, {\n        onChange: key => setActiveTab(key),\n        defaultActiveKey: \"image\",\n        activeKey: activeTab,\n        tabBarExtraContent: operations,\n        children: [/*#__PURE__*/_jsxDEV(TabPane, {\n          tab: \"Images\",\n          children: renderPosts(\"image\")\n        }, \"image\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(TabPane, {\n          tab: \"Videos\",\n          children: renderPosts(\"video\")\n        }, \"video\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 10\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 8\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 6\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 4\n  }, this);\n}\n_s(Home, \"wsMVT9R1VOpXPqcRFgod5krxwG0=\");\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","useEffect","Tabs","message","Row","Col","Button","axios","SearchBar","SEARCH_KEY","BASE_URL","TOKEN_KEY","jsxDEV","_jsxDEV","TabPane","Home","props","_s","posts","setPost","activeTab","setActiveTab","searchOption","setSearchOption","type","all","keyword","fetchPost","option","url","user","opt","method","headers","Authorization","localStorage","getItem","then","res","status","data","catch","err","error","console","log","renderPosts","length","children","fileName","_jsxFileName","lineNumber","columnNumber","operations","className","onChange","key","defaultActiveKey","activeKey","tabBarExtraContent","tab","_c","$RefreshReg$"],"sources":["/Users/yuxuan/Desktop/projects/around-web/src/components/Home.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Tabs, message, Row, Col, Button } from \"antd\";\nimport axios from \"axios\";\n\nimport SearchBar from \"./SearchBar\";\nimport { SEARCH_KEY, BASE_URL, TOKEN_KEY } from \"../constants\";\n\nconst { TabPane } = Tabs;\n\nfunction Home(props) {\n const [posts, setPost] = useState([]);\n const [activeTab, setActiveTab] = useState(\"image\");\n const [searchOption, setSearchOption] = useState({\n   type: SEARCH_KEY.all,\n   keyword: \"\"\n });\n\n useEffect(() => {\n   fetchPost(searchOption);\n }, [searchOption]);\n\n const fetchPost = (option) => {\n   const { type, keyword } = option;\n   let url = \"\";\n\n   if (type === SEARCH_KEY.all) {\n     url = `${BASE_URL}/search`;\n   } else if (type === SEARCH_KEY.user) {\n     url = `${BASE_URL}/search?user=${keyword}`;\n   } else {\n     url = `${BASE_URL}/search?keywords=${keyword}`;\n   }\n\n   const opt = {\n     method: \"GET\",\n     url: url,\n     headers: {\n       Authorization: `Bearer ${localStorage.getItem(TOKEN_KEY)}`\n     }\n   };\n\n   axios(opt)\n     .then((res) => {\n       if (res.status === 200) {\n         setPost(res.data);\n       }\n     })\n     .catch((err) => {\n       message.error(\"Load failed. Please Try later!\");\n       console.log(\"fetch posts failed: \", err.message);\n     });\n };\n\n const renderPosts = (type) => {\n   if (!posts || posts.length === 0) {\n     return <div>No!</div>;\n   }\n   if (type === \"image\") {\n     console.log(\"images -> \", posts);\n     return \"images\";\n   } else if (type === \"video\") {\n     console.log(\"video -> \", posts);\n     return \"videos\";\n   }\n };\n\n const operations = <Button>Upload</Button>;\n return (\n   <div className=\"home\">\n     <SearchBar />\n     <div className=\"display\">\n       <Tabs\n         onChange={(key) => setActiveTab(key)}\n         defaultActiveKey=\"image\"\n         activeKey={activeTab}\n         tabBarExtraContent={operations}\n       >\n         <TabPane tab=\"Images\" key=\"image\">\n           {renderPosts(\"image\")}\n         </TabPane>\n         <TabPane tab=\"Videos\" key=\"video\">\n           {renderPosts(\"video\")}\n         </TabPane>\n       </Tabs>\n     </div>\n   </div>\n );\n}\n\nexport default Home;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,IAAI,EAAEC,OAAO,EAAEC,GAAG,EAAEC,GAAG,EAAEC,MAAM,QAAQ,MAAM;AACtD,OAAOC,KAAK,MAAM,OAAO;AAEzB,OAAOC,SAAS,MAAM,aAAa;AACnC,SAASC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/D,MAAM;EAAEC;AAAQ,CAAC,GAAGZ,IAAI;AAExB,SAASa,IAAIA,CAACC,KAAK,EAAE;EAAAC,EAAA;EACpB,MAAM,CAACC,KAAK,EAAEC,OAAO,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EACrC,MAAM,CAACoB,SAAS,EAAEC,YAAY,CAAC,GAAGrB,QAAQ,CAAC,OAAO,CAAC;EACnD,MAAM,CAACsB,YAAY,EAAEC,eAAe,CAAC,GAAGvB,QAAQ,CAAC;IAC/CwB,IAAI,EAAEf,UAAU,CAACgB,GAAG;IACpBC,OAAO,EAAE;EACX,CAAC,CAAC;EAEFzB,SAAS,CAAC,MAAM;IACd0B,SAAS,CAACL,YAAY,CAAC;EACzB,CAAC,EAAE,CAACA,YAAY,CAAC,CAAC;EAElB,MAAMK,SAAS,GAAIC,MAAM,IAAK;IAC5B,MAAM;MAAEJ,IAAI;MAAEE;IAAQ,CAAC,GAAGE,MAAM;IAChC,IAAIC,GAAG,GAAG,EAAE;IAEZ,IAAIL,IAAI,KAAKf,UAAU,CAACgB,GAAG,EAAE;MAC3BI,GAAG,GAAI,GAAEnB,QAAS,SAAQ;IAC5B,CAAC,MAAM,IAAIc,IAAI,KAAKf,UAAU,CAACqB,IAAI,EAAE;MACnCD,GAAG,GAAI,GAAEnB,QAAS,gBAAegB,OAAQ,EAAC;IAC5C,CAAC,MAAM;MACLG,GAAG,GAAI,GAAEnB,QAAS,oBAAmBgB,OAAQ,EAAC;IAChD;IAEA,MAAMK,GAAG,GAAG;MACVC,MAAM,EAAE,KAAK;MACbH,GAAG,EAAEA,GAAG;MACRI,OAAO,EAAE;QACPC,aAAa,EAAG,UAASC,YAAY,CAACC,OAAO,CAACzB,SAAS,CAAE;MAC3D;IACF,CAAC;IAEDJ,KAAK,CAACwB,GAAG,CAAC,CACPM,IAAI,CAAEC,GAAG,IAAK;MACb,IAAIA,GAAG,CAACC,MAAM,KAAK,GAAG,EAAE;QACtBpB,OAAO,CAACmB,GAAG,CAACE,IAAI,CAAC;MACnB;IACF,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,IAAK;MACdvC,OAAO,CAACwC,KAAK,CAAC,gCAAgC,CAAC;MAC/CC,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEH,GAAG,CAACvC,OAAO,CAAC;IAClD,CAAC,CAAC;EACN,CAAC;EAED,MAAM2C,WAAW,GAAItB,IAAI,IAAK;IAC5B,IAAI,CAACN,KAAK,IAAIA,KAAK,CAAC6B,MAAM,KAAK,CAAC,EAAE;MAChC,oBAAOlC,OAAA;QAAAmC,QAAA,EAAK;MAAG;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC;IACvB;IACA,IAAI5B,IAAI,KAAK,OAAO,EAAE;MACpBoB,OAAO,CAACC,GAAG,CAAC,YAAY,EAAE3B,KAAK,CAAC;MAChC,OAAO,QAAQ;IACjB,CAAC,MAAM,IAAIM,IAAI,KAAK,OAAO,EAAE;MAC3BoB,OAAO,CAACC,GAAG,CAAC,WAAW,EAAE3B,KAAK,CAAC;MAC/B,OAAO,QAAQ;IACjB;EACF,CAAC;EAED,MAAMmC,UAAU,gBAAGxC,OAAA,CAACP,MAAM;IAAA0C,QAAA,EAAC;EAAM;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAQ,CAAC;EAC1C,oBACEvC,OAAA;IAAKyC,SAAS,EAAC,MAAM;IAAAN,QAAA,gBACnBnC,OAAA,CAACL,SAAS;MAAAyC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACbvC,OAAA;MAAKyC,SAAS,EAAC,SAAS;MAAAN,QAAA,eACtBnC,OAAA,CAACX,IAAI;QACHqD,QAAQ,EAAGC,GAAG,IAAKnC,YAAY,CAACmC,GAAG,CAAE;QACrCC,gBAAgB,EAAC,OAAO;QACxBC,SAAS,EAAEtC,SAAU;QACrBuC,kBAAkB,EAAEN,UAAW;QAAAL,QAAA,gBAE/BnC,OAAA,CAACC,OAAO;UAAC8C,GAAG,EAAC,QAAQ;UAAAZ,QAAA,EAClBF,WAAW,CAAC,OAAO;QAAC,GADG,OAAO;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAExB,CAAC,eACVvC,OAAA,CAACC,OAAO;UAAC8C,GAAG,EAAC,QAAQ;UAAAZ,QAAA,EAClBF,WAAW,CAAC,OAAO;QAAC,GADG,OAAO;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAExB,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAET;AAACnC,EAAA,CA9EQF,IAAI;AAAA8C,EAAA,GAAJ9C,IAAI;AAgFb,eAAeA,IAAI;AAAC,IAAA8C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}