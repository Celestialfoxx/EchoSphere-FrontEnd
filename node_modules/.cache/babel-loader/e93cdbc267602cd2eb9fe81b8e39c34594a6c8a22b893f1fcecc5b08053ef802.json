{"ast":null,"code":"import React from\"react\";import{Form,Input,Button,message}from\"antd\";import axios from\"axios\";import{BASE_URL}from\"../constants\";// (mobile) responsiveness design\n// 根据浏览器的长款变换显示的大小\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const formItemLayout={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};const tailFormItemLayout={wrapperCol:{xs:{span:16,offset:0},sm:{span:16,offset:8}}};function Register(props){const[form]=Form.useForm();const onFinish=values=>{console.log(\"Received values of form: \",values);const{username,password}=values;const opt={method:\"POST\",url:\"\".concat(BASE_URL,\"/signup\"),data:{username:username,password:password},headers:{\"content-type\":\"application/json\"}};axios(opt).then(response=>{console.log(response);// case1: registered success\nif(response.status===200){message.success(\"Registration succeed!\");props.history.push(\"/login\");}}).catch(error=>{console.log(\"register failed: \",error.message);message.error(\"Registration failed!\");// throw new Error('Signup Failed!')\n});};return/*#__PURE__*/_jsxs(Form,{...formItemLayout,form:form,name:\"register\",onFinish:onFinish,className:\"register\",children:[/*#__PURE__*/_jsx(Form.Item,{name:\"username\",label:\"Username\",rules:[{required:true,message:\"Please input your Username!\"}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{name:\"password\",label:\"Password\",rules:[{required:true,message:\"Please input your password!\"}],hasFeedback:true,children:/*#__PURE__*/_jsx(Input.Password,{})}),/*#__PURE__*/_jsx(Form.Item,{name:\"confirm\",label:\"Confirm Password\",dependencies:[\"password\"],hasFeedback:true,rules:[{required:true,message:\"Please confirm your password!\"},_ref=>{let{getFieldValue}=_ref;return{validator(rule,value){if(!value||getFieldValue(\"password\")===value){return Promise.resolve();}return Promise.reject(\"The two passwords that you entered do not match!\");}};}],children:/*#__PURE__*/_jsx(Input.Password,{})}),/*#__PURE__*/_jsx(Form.Item,{...tailFormItemLayout,children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",className:\"register-btn\",children:\"Register\"})})]});}export default Register;","map":{"version":3,"names":["React","Form","Input","Button","message","axios","BASE_URL","jsx","_jsx","jsxs","_jsxs","formItemLayout","labelCol","xs","span","sm","wrapperCol","tailFormItemLayout","offset","Register","props","form","useForm","onFinish","values","console","log","username","password","opt","method","url","concat","data","headers","then","response","status","success","history","push","catch","error","name","className","children","Item","label","rules","required","hasFeedback","Password","dependencies","_ref","getFieldValue","validator","rule","value","Promise","resolve","reject","type","htmlType"],"sources":["/Users/yuxuan/Desktop/projects/around-web/src/components/Register.js"],"sourcesContent":["import React from \"react\";\nimport { Form, Input, Button, message } from \"antd\";\nimport axios from \"axios\";\n\nimport { BASE_URL } from \"../constants\";\n\n// (mobile) responsiveness design\n// 根据浏览器的长款变换显示的大小\nconst formItemLayout = {\n  labelCol: {\n    xs: { span: 24 },\n    sm: { span: 8 },\n  },\n  wrapperCol: {\n    xs: { span: 24 },\n    sm: { span: 16 },\n  },\n};\nconst tailFormItemLayout = {\n  wrapperCol: {\n    xs: {\n      span: 16,\n      offset: 0,\n    },\n    sm: {\n      span: 16,\n      offset: 8,\n    },\n  },\n};\n\nfunction Register(props) {\n  const [form] = Form.useForm();\n\n  const onFinish = (values) => {\n    console.log(\"Received values of form: \", values);\n    const { username, password } = values;\n    const opt = {\n      method: \"POST\",\n      url: `${BASE_URL}/signup`,\n      data: {\n        username: username,\n        password: password,\n      },\n      headers: { \"content-type\": \"application/json\" },\n    };\n\n    axios(opt)\n      .then((response) => {\n        console.log(response);\n        // case1: registered success\n        if (response.status === 200) {\n          message.success(\"Registration succeed!\");\n          props.history.push(\"/login\");\n        }\n      })\n      .catch((error) => {\n        console.log(\"register failed: \", error.message);\n        message.error(\"Registration failed!\");\n        // throw new Error('Signup Failed!')\n      });\n  };\n\n  return (\n    <Form\n      {...formItemLayout}\n      form={form}\n      name=\"register\"\n      onFinish={onFinish}\n      className=\"register\"\n    >\n      <Form.Item\n        name=\"username\"\n        label=\"Username\"\n        rules={[\n          {\n            required: true,\n            message: \"Please input your Username!\",\n          },\n        ]}\n      >\n        <Input />\n      </Form.Item>\n\n      <Form.Item\n        name=\"password\"\n        label=\"Password\"\n        rules={[\n          {\n            required: true,\n            message: \"Please input your password!\",\n          },\n        ]}\n        hasFeedback\n      >\n        <Input.Password />\n      </Form.Item>\n\n      <Form.Item\n        name=\"confirm\"\n        label=\"Confirm Password\"\n        dependencies={[\"password\"]}\n        hasFeedback\n        rules={[\n          {\n            required: true,\n            message: \"Please confirm your password!\",\n          },\n          ({ getFieldValue }) => ({\n            validator(rule, value) {\n              if (!value || getFieldValue(\"password\") === value) {\n                return Promise.resolve();\n              }\n              return Promise.reject(\n                \"The two passwords that you entered do not match!\"\n              );\n            },\n          }),\n        ]}\n      >\n        <Input.Password />\n      </Form.Item>\n\n      <Form.Item {...tailFormItemLayout}>\n        <Button type=\"primary\" htmlType=\"submit\" className=\"register-btn\">\n          Register\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n}\n\nexport default Register;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}